# 🔍 DOI Tool - Finderライクなファイル選択機能

Finderのような直感的なファイル選択機能を搭載したDOI処理ツールです！

## ✨ 新機能: Finderライクなファイルブラウザ

### 🎯 主な特徴
- **📁 ディレクトリツリー表示**: フォルダ構造を視覚的に確認
- **📄 複数ファイル選択**: 複数のCSVファイルを同時選択
- **✓ 選択状態表示**: 選択済みファイルを✓マークで表示
- **📊 ファイル情報**: サイズや種類を即座に確認
- **🎯 作業ディレクトリ設定**: 結果保存先を自由に選択

### 🖥️ 2つのバージョン

#### 1. コマンドライン版ファイルブラウザ（推奨）
```
┌──────────────────────────────────────────────────────────────┐
│ 📁 現在の場所: /Users/username/Documents/research_data       │
└──────────────────────────────────────────────────────────────┘

📋 ファイル・フォルダ一覧:

  [✓]  1. 📄 scopus_export_1.csv
        └── 1250.3 KB
  [ ]  2. 📄 scopus_export_2.csv  
        └── 890.7 KB
       3. 📁 backup_files
       4. 📁 processed_data

📋 操作メニュー:
  数字    : フォルダに移動 / CSVファイルを選択切替
  a       : 現在フォルダの全CSVファイルを選択
  c       : 選択をクリア
  d       : このフォルダを作業ディレクトリに設定
  s       : 選択したファイルで処理開始

✅ 選択済み: 1 ファイル
   📄 scopus_export_1.csv
📁 作業ディレクトリ: /Users/username/Documents/research_data
```

#### 2. GUI版ファイルブラウザ
- **ツリービュー**: 左側にフォルダ構造を表示
- **ファイル詳細**: 右側にファイル情報を表示
- **進捗バー**: 処理状況をリアルタイム表示
- **ドラッグ&ドロップ対応**: ファイルを直感的に選択

## 🚀 今すぐ開始

### 1. ファイルブラウザ版を起動
```bash
cd /Users/shigenoburyuto/Documents/GitHub/DOI_tool_ver1/app_build
chmod +x quick_file_browser.sh
./quick_file_browser.sh
```

### 2. 推奨選択肢
- **初回利用者** → **1** (コマンドライン版ファイルブラウザ)
- **GUI好みの方** → **2** (GUI版ファイルブラウザ)

## 📋 使用手順（コマンドライン版）

### ステップ1: ファイル選択モード
1. **フォルダ移動**: 数字を入力してフォルダに移動
2. **ファイル選択**: CSVファイルの番号を入力して選択切替
3. **一括選択**: `a`キーで現在フォルダの全CSVファイルを選択
4. **作業ディレクトリ設定**: `d`キーで現在フォルダを作業先に設定

### ステップ2: 処理実行
1. **処理開始**: `s`キーで選択したファイルの処理を開始
2. **進捗確認**: リアルタイムで処理状況を確認
3. **結果確認**: md_folderにMarkdownファイルが生成

## 🖥️ GUI版の操作方法

### ファイルツリーの操作
- **📁 フォルダ**: ダブルクリックで移動
- **📄 CSVファイル**: シングルクリックで選択切替
- **🔄 更新**: フォルダ選択ボタンで別のフォルダに移動

### ボタン操作
- **✅ 全CSV選択**: 現在フォルダの全CSVファイルを選択
- **❌ 選択クリア**: 全ての選択を解除
- **📁 作業ディレクトリ設定**: 現在フォルダを処理結果の保存先に設定
- **🚀 処理を開始**: 選択したファイルで処理実行

## 🎯 ファイル選択の種類

### 1. 個別選択モード
```
🔍 ファイル選択方法:
1. 個別選択 - CSVファイルを個別に選択
2. フォルダ選択 - フォルダ内の全CSVファイルを自動選択
```

**個別選択**の場合:
- 特定のCSVファイルのみを処理
- 複数ファイルを自由に組み合わせ
- ファイルサイズや内容を確認してから選択

**フォルダ選択**の場合:
- フォルダ内の全CSVファイルを自動選択
- 大量ファイルの一括処理に便利
- scopus_combined.csvは自動で除外

## 📊 表示される情報

### ファイル情報
- **📄 ファイル名**: CSVファイルの名前
- **📏 ファイルサイズ**: KB/MB単位で表示
- **✓ 選択状態**: 選択済みファイルにチェックマーク
- **📁 フォルダ情報**: ディレクトリ構造

### 選択状況表示
```
📋 現在の選択状況:
─────────────────────────────────────────────────────
📁 作業ディレクトリ: /Users/username/Documents/data
📄 選択されたCSVファイル: 3 個
   1. experiment_1.csv (1.2 MB)
   2. experiment_2.csv (890.5 KB)
   3. experiment_3.csv (654.3 KB)
```

## ⌨️ キー操作一覧（コマンドライン版）

| キー | 機能 | 説明 |
|------|------|------|
| `1-9` | ファイル/フォルダ選択 | 番号でアイテムを選択 |
| `a` | 全CSV選択 | 現在フォルダの全CSVファイルを選択 |
| `c` | 選択クリア | 全ての選択を解除 |
| `d` | 作業ディレクトリ設定 | 現在フォルダを作業先に設定 |
| `s` | 処理開始 | 選択したファイルで処理実行 |
| `q` | 戻る/終了 | 前の画面に戻る |

## 🎨 視覚的な特徴

### アイコン表示
- **📁**: フォルダ
- **📄**: 通常のCSVファイル
- **📋**: 中サイズのCSVファイル
- **📊**: 大サイズのCSVファイル  
- **✓📄**: 選択済みCSVファイル
- **❌**: エラー/アクセス不可

### サイズ表示
- **< 100KB**: 📄 (小)
- **100KB-1MB**: 📋 (中)
- **> 1MB**: 📊 (大)

## 🔄 処理フロー

1. **ファイルブラウザ起動**
   ```bash
   ./quick_file_browser.sh → 1選択
   ```

2. **ディレクトリ移動**
   ```
   数字入力でフォルダ移動
   CSVファイルがあるフォルダまで移動
   ```

3. **ファイル選択**
   ```
   a: 全選択 または 個別番号入力で選択
   選択状態を✓マークで確認
   ```

4. **作業ディレクトリ設定**
   ```
   d: 現在フォルダを作業ディレクトリに設定
   結果保存先を指定
   ```

5. **処理実行**
   ```
   s: 処理開始
   進捗表示で処理状況を確認
   ```

6. **結果確認**
   ```
   md_folder/にMarkdownファイル生成
   フォルダ自動表示で結果確認
   ```

## 💡 使用のコツ

### 効率的なファイル選択
- **大量ファイル**: フォルダ選択モード（選択肢2）を使用
- **特定ファイル**: 個別選択モード（選択肢1）を使用
- **ファイル確認**: サイズ情報で内容を推測

### 作業ディレクトリの設定
- **結果保存先**: 処理結果を保存したい場所を指定
- **アクセス権限**: 書き込み権限があるフォルダを選択
- **整理しやすい場所**: 後で見つけやすい場所を選択

## 🚨 トラブルシューティング

### ファイルが表示されない
- **権限エラー**: アクセス権限を確認
- **ファイル形式**: .csv拡張子のファイルのみ表示
- **隠しファイル**: 隠しファイルは表示されません

### 選択できない
- **ファイル形式確認**: CSVファイル以外は選択不可
- **アクセス権限**: 読み取り権限を確認
- **ファイルサイズ**: 極端に大きなファイルは注意

### 処理が開始できない
- **必須項目**: CSVファイルと作業ディレクトリの両方が必要
- **権限確認**: 作業ディレクトリへの書き込み権限を確認
- **空き容量**: 十分なディスク容量があることを確認

---

**🔍 Finderライクな操作で、直感的にファイルを選択して効率的な文献管理を始めましょう！**
